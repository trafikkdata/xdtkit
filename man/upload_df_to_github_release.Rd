% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/publishing.R
\name{upload_df_to_github_release}
\alias{upload_df_to_github_release}
\title{Upload AADT predictions to GitHub release}
\usage{
upload_df_to_github_release(
  df,
  year = NULL,
  overwrite = FALSE,
  prerelease = FALSE
)
}
\arguments{
\item{df}{A data frame containing AADT model predictions to upload.}

\item{year}{Integer. The year for the release tag. If NULL (default), uses
the current year.}

\item{overwrite}{Logical. If TRUE, allows overwriting an existing release
for the specified year. If FALSE (default) and a release already exists,
the function will stop with an error. Default is FALSE.}

\item{prerelease}{Logical. If TRUE, marks the release as a pre-release,
which prevents it from being shown as the "latest" release on GitHub.
Useful for test releases. Default is FALSE.}
}
\value{
Invisibly returns TRUE if successful. Prints status messages during
  execution.
}
\description{
Uploads a data frame containing AADT model predictions to a GitHub release
as a JSON file. The function creates a year-based release (e.g., tag "2025")
and uploads the data as "aadt_model_result.json". Existing releases can be
overwritten, and test releases can be marked as pre-releases.
}
\details{
The function requires a GitHub personal access token stored in the
environment variable `TRAFIKKDATA_GH_PKG_TOKEN`. This can be set in your
`.Renviron` file using `usethis::edit_r_environ()`.

The function performs the following steps:
\enumerate{
  \item Checks if a release with the specified year tag already exists
  \item If it exists and `overwrite = TRUE`, deletes the old release and tag
  \item Creates a new release with the year as the tag
  \item Uploads the data frame as "aadt_model_result.json"
  \item Verifies the release is published (not draft)
}

The uploaded file will be available at:
\code{https://github.com/trafikkdata/adt-model-results/releases/download/{year}/aadt_model_result.json}
}
\section{GitHub Token Setup}{

To set up your GitHub token:
\enumerate{
  \item Run `usethis::edit_r_environ()`
  \item Add the line: `TRAFIKKDATA_GH_PKG_TOKEN=your_token_here`
  \item Save the file and restart R
  \item Verify with: `Sys.getenv("TRAFIKKDATA_GH_PKG_TOKEN")`
}
}

\examples{
\dontrun{
# Create test release (marked as pre-release)
upload_df_to_github_release(test_data, year = 9999,
                             prerelease = TRUE, overwrite = TRUE)

# Upload production results for 2025
upload_df_to_github_release(aadt_results_2025, year = 2025)

# Update existing 2025 release with revised predictions
upload_df_to_github_release(aadt_results_2025_v2, year = 2025,
                             overwrite = TRUE)
}

}
