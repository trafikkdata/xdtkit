% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model_balancing_clusters.R
\name{strategic_network_clustering}
\alias{strategic_network_clustering}
\title{Strategic network clustering for traffic flow balancing}
\usage{
strategic_network_clustering(
  data,
  year,
  boundary_links = c("Trafikkdata_continuous"),
  extra_boundary_links = NULL,
  heavy_vehicle = FALSE
)
}
\arguments{
\item{data}{A data frame containing directional traffic link data with columns:
\describe{
  \item{parentTrafficLinkId}{Unique identifier for undirected traffic links}
  \item{startTrafficNodeId}{ID of the start node}
  \item{endTrafficNodeId}{ID of the end node}
  \item{aadt}{Traffic measurement value (NA if unmeasured)}
}}

\item{year}{The current year, used to decide which registration points are recent enough to use ar borders.}

\item{boundary_links}{Which traffic_volume_source values will be used as boundary points. Default is only Traffikdata_continuous.}

\item{extra_boundary_links}{A vector with any additional parentTrafficLinkId's to be used as boundaries, regardless of traffic volume source and age. This can be useful if the clusters are very large without allowing these.}

\item{heavy_vehicle}{If TRUE, only uses data sources that have heavy vehicle counts as boundaries.}
}
\value{
A data frame with columns:
  \describe{
    \item{id}{Parent traffic link ID}
    \item{cluster_id}{Assigned cluster ID (1 to N)}
  }
  Note: Boundary measurement links appear multiple times (once per adjacent cluster)
}
\description{
Partitions a road network into clusters suitable for traffic flow balancing.
The algorithm separates mainland from island components, uses measurement
points as barriers to create base clusters, merges small clusters to achieve
target sizes, and assigns boundary measurements to multiple adjacent clusters
to ensure prediction continuity.
}
\details{
The clustering algorithm follows these steps:
\enumerate{
  \item Build link adjacency graph where traffic links are vertices
  \item Identify mainland (largest component) vs island components
  \item Use all measurement links as barriers on mainland
  \item Create base clusters by removing barriers
  \item Merge small clusters (<100 links) with neighbors (keeping result <1000 links)
  \item Assign barrier links to all neighboring clusters (creates duplicates)
  \item Assign each island as a separate cluster
}
}
\examples{
\dontrun{
cluster_assignments <- strategic_network_clustering(data)
}
}
